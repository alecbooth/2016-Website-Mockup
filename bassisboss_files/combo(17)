YUI.add("set-models",function(e,t){function r(e){r.superclass.constructor.call(this,e)}var n=require("lib/flog")(t);e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photosets-getPhotos"].run(t,this.appContext)},create:function(t,n){return e.ModelCreators["flickr-photosets-create"].run(t,n)},createHidden:function(t,n){return e.ModelCreators["flickr-photosets-createHidden"].run(t,n)},addPhoto:function(t,n){return e.ModelCreators["flickr-photosets-addPhoto"].run(t,n)},removePhoto:function(t,n){return e.ModelCreators["flickr-photosets-removePhoto"].run(t,n)},update:function(t,n){return e.ModelUpdaters["flickr-photosets-editMeta"].run({photosetId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)},setPrimaryPhoto:function(t,n){return e.ModelUpdaters["flickr-photosets-setPrimaryPhoto"].run(t,n)},"delete":function(t){if(typeof t=="string"){var n=t;t={setID:n}}return e.ModelDeletors["flickr-photosets-delete-deletor"].run(t,this.appContext)}},addPhoto:function(e,t){return this.getValue(e,"photoPageList").hasMaxBoundary()&&this.getValue(e,"photoPageList").appendToList(t),this.getValue(e,"photoContextList").hasMaxBoundary()&&this.getValue(e,"photoContextList").appendToList(t),this},removePhoto:function(e,t){return this.getValue(e,"photoPageList").removeFromList(t.getValue("id")),this.getValue(e,"photoContextList").removeFromList(t.getValue("id")),this},hasPhoto:function(e,t){return this.getValue(e,"photoPageList").getFromListByID(t)||this.getValue(e,"photoContextList").getFromListByID(t)},getSizeToFit:function(t,r,i){n.warn("Using `getSizeToFit` is deprecated. See model comments for more details.");var s=e.PhotoModelHelper.getSizeToFit(t,r,e.merge({sizes:this.getValue(t,"primaryPhotoSizes"),includeSquare:!0,cropToFit:!0},i));return s&&(s.url=s.src),s},getLargestPrimaryPhotoSize:function(t,n){return e.PhotoModelHelper.getLargestSize(t,n)},attributes:{normalizedId:{readOnly:!0,defaultFn:function(e){return e.split("-")[0]}},displayType:{readOnly:!0,defaultFn:function(){return"set"}},title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},owner:{isModel:!0},isOwner:e.PhotoModelHelper.attributes.isOwner,photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photosets-getPhotos"]}},photoContextList:{isListProxy:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photosets-getContext"],listItemIdField:"photoId"}},photoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},videoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},totalCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return this.getValue(e,"photoCount")+this.getValue(e,"videoCount")}},viewCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},photoCountDisplay:{readOnly:!0,derivedBy:["totalCount"],defaultFn:function(e){var t=this.getValue(e,"photoCount"),n=this.getValue(e,"videoCount"),r=this.getValue(e,"totalCount"),i="";return t-=n,t===0&&n===0?i=this.intlMessage({intlName:"models.ZERO_PHOTOS"}):t===1&&n===0?i=this.intlMessage({intlName:"models.ONE_PHOTO"}):t>1&&n===0?i=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS",photos:t}):t===0&&n===1?i=this.intlMessage({intlName:"models.ONE_VIDEO"}):t===1&&n===1?i=this.intlMessage({intlName:"models.ONE_PHOTO_AND_ONE_VIDEO"}):t>1&&n===1?i=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_ONE_VIDEO",photos:t}):t===0&&n>1?i=this.intlMessage({intlName:"models.MULTIPLE_VIDEOS",videos:n}):t===1&&n>1?i=this.intlMessage({intlName:"models.ONE_PHOTO_AND_MULTIPLE_VIDEOS",videos:n}):t>1&&n>1&&(i=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS",photos:t,videos:n})),r===0?i=this.intlMessage({intlName:"models.ZERO_ITEMS"}):r===1?i=this.intlMessage({intlName:"models.ONE_ITEM"}):r>1&&(i=this.intlMessage({intlName:"models.MULTIPLE_ITEMS",items:r})),i}},photoAndVideosDisplay:{readOnly:!0,derivedBy:["photoCount","videoCount"],defaultFn:function(e){var t=this.getValue(e,"photoCount"),n=this.getValue(e,"videoCount"),r="";return t===0&&n===0?r=this.intlMessage({intlName:"models.ZERO_PHOTOS"}):t===1&&n===0?r=this.intlMessage({intlName:"models.ONE_PHOTO"}):t>1&&n===0?r=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS",photos:t}):t===0&&n===1?r=this.intlMessage({intlName:"models.ONE_VIDEO"}):t===1&&n===1?r=this.intlMessage({intlName:"models.ONE_PHOTO_AND_ONE_VIDEO"}):t>1&&n===1?r=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_ONE_VIDEO",photos:t}):t===0&&n>1?r=this.intlMessage({intlName:"models.MULTIPLE_VIDEOS",videos:n}):t===1&&n>1?r=this.intlMessage({intlName:"models.ONE_PHOTO_AND_MULTIPLE_VIDEOS",videos:n}):t>1&&n>1&&(r=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS",photos:t,videos:n})),r}},sharedEntityDisplay:{readOnly:!0,derivedBy:["videoCount","photoCount"],defaultFn:function(e){var t=this.getValue(e,"photoCount"),n=this.getValue(e,"videoCount"),r=this.getValue(e,"owner"),i="";return t&&!n?i=this.intlMessage({intlName:"shared-entity.USERNAME_HAS_SHARED_PHOTOS_ONLY",username:r.getValue("displayname"),photoCount:parseInt(t,10)}):!t&&n?i=this.intlMessage({intlName:"shared-entity.USERNAME_HAS_SHARED_VIDEOS_ONLY",username:r.getValue("displayname"),videoCount:parseInt(n,10)}):t&&n&&(i=this.intlMessage({intlName:"shared-entity.USERNAME_HAS_SHARED_PHOTOS_VIDEOS"
,username:r.getValue("displayname"),photoCount:parseInt(t,10),videoCount:parseInt(n,10)})),i}},primary:{},primaryPhotoSizes:{},primaryNeedsInterstitial:{},bestIconURL:{readOnly:!0,derivedBy:["primaryPhotoSizes"],defaultFn:function(t){var n=e.PhotoModelHelper.getSizeToFit(t,{height:48,width:48},e.merge({sizes:this.getValue(t,"primaryPhotoSizes"),includeSquare:!0,cropToFit:!0}));return n?n.src:""}},url:{readOnly:!0,derivedBy:["owner","normalizedId"],defaultFn:function(e){var t=this.getValue(e,"owner"),n=this.getValue(e,"isSharedEntity"),r=this.getValue(e,"normalizedId");return t&&n===!0?"/photos/"+t.getValue("pathAlias")+"/shares/"+r:t?"/photos/"+t.getValue("pathAlias")+"/albums/"+r:undefined}},isAutoUploadSet:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isSharedEntity:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canShare:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canDownload:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},urlSuffix:{readOnly:!0,defaultFn:function(e){var t=this.getValue(e,"isSharedEntity");return t?"shares-"+e:"album-"+e}},gpCode:{defaultFn:function(e){return null}},gpOwner:{defaultFn:function(e){return null}}}},{buildCompoundId:function(e,t,n){var r=e;return t&&(r+="-"+t),n&&(t||(r+="-dateposted"),r+="-"+n),r},splitCompoundId:function(e){var t=e.split("-");return{nsid:t[0],orderBy:t[1],viewAs:t[2]}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-addPhoto-creator","flickr-photosets-removePhoto-deletor","flickr-photosets-delete-deletor","flickr-photosets-getPhotos-fetcher","flickr-photosets-getContext-fetcher","flickr-photosets-create-creator","flickr-photosets-createHidden-creator","flickr-photosets-editMeta-updater","flickr-photosets-setPrimaryPhoto-updater","photo-model-helper"],langBundles:["models","shared-entity"]});
YUI.add("flickr-photos-getAllContexts-fetcher",function(e,t){"use strict";function n(t){var n;return n={photo_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras()+","+e.APIHelper.request.getRebootAlbumsListExtras(),primary_photo_extras:"url_sq, url_t, url_s, url_m, needs_interstitial"},t.scrappy&&(n.get_all_galleries=1,n.no_faves_context=1,n.per_type_limit=6,n.get_totals=1,n.sort="date-desc"),n}function r(t,n){var r=t[0],i=t[1],s=t[2],o={},u=[],a,f=t[8],l=t[9],c=t[10],h=t[11],p;return o.faves=t[3],o.gallery=t[4],o.pool=t[5],o.set=t[6],o.stream=t[7],e.Object.each(o,function(t,n){r[n]&&e.Array.each(r[n],function(n){e.APIHelper.response.addContextToRegistry(n,t,i,h),u.push(t.proxy(n.id))})}),s.exists(n.id)||(a=s.add({id:n.id,totalGroups:r.totals&&r.totals.groups,totalSets:r.totals&&r.totals.sets,totalGalleries:r.totals&&r.totals.galleries}),s.setValue(n.id,"contexts",u)),f.addOrUpdate({id:n.id,total:r.totals&&r.totals.groups,groups:s.getContextsOfType(n.id,"group-pool-models")}),p=s.getContextsOfType(n.id,"set-models"),p.forEach(function(e){e.setValue("totalCount",parseInt(e.getValue("photoCount"),10)+parseInt(e.getValue("videoCount"),10))}),l.addOrUpdate({id:n.id,total:r.totals&&r.totals.sets,sets:p}),c.addOrUpdate({id:n.id,total:r.totals&&r.totals.galleries,galleries:s.getContextsOfType(n.id,"gallery-models")}),a}function i(n,r){var i=this;return r.flipper.isFlipped("enable-scrappy-photo-page")&&(n.scrappy=!0),e.Promise.all([r.callAPI("flickr.photos.getAllContexts",this._processParams(n),!0),r.getModelRegistry("person-models"),r.getModelRegistry("photo-contexts-models"),r.getModelRegistry("favorite-models"),r.getModelRegistry("gallery-models"),r.getModelRegistry("group-pool-models"),r.getModelRegistry("set-models"),r.getModelRegistry("photostream-models"),r.getModelRegistry("photo-groups-models"),r.getModelRegistry("photo-sets-models"),r.getModelRegistry("photo-galleries-models"),r.getModelRegistry("group-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-photos-getAllContexts"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-contexts-models","favorite-models","gallery-models","group-pool-models","photostream-models","set-models","photo-groups-models","photo-sets-models","photo-galleries-models","group-models"]});
YUI.add("photo-contexts-models",function(e){function t(e){t.superclass.constructor.call(this,e),this.getMorePromises={"group-pool-models":{},"set-models":{},"gallery-models":{}},this.continuationKeys={"group-pool-models":{},"set-models":{},"gallery-models":{}}}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return this.appContext.flipper.isFlipped("enable-scrappy-photo-page")?e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext):e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)}},getMoreContextsOfType:function(t,n,r){var i=this,s,o,u,a,f,l,c,h="-1",p=e.APIHelper.request.getRebootPhotoExtras();switch(n){case"group-pool-models":s="flickr.photos.getGroups",u="groups.group",p+=","+e.APIHelper.request.getRebootGroupExtras();break;case"set-models":s="flickr.photos.getSets",u="sets.set";break;case"gallery-models":s="flickr.photos.getGalleries",u="galleries.gallery"}return s?this.exists(t)?(a=this.continuationKeys[n][t]||"0",a===h?e.Promise.resolve({type:n,newContexts:[],loadedAll:!0}):(o={photo_id:t,extras:p,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:a,per_page:r},l=t+"_"+a,c=this.getMorePromises[n][l],c?c:(this.getMorePromises[n][l]=(new e.FlickrPromise({apiResponse:this.appContext.callAPI(s,o,!0),contextRegistry:this.appContext.getModelRegistry(n),personRegistry:this.appContext.getModelRegistry("person-models")})).then(function(r){var s=[],o=r.apiResponse,a=r.contextRegistry,c=r.personRegistry,p,d,v;return d=u.split(".").reduce(function(t,n){return e.Lang.isObject(t)?t[n]:undefined},o),d&&(e.Array.each(d,function(t){e.APIHelper.response.addContextToRegistry(t,a,c),s.push(a.proxy(t.id))}),s.length&&(v=i.getContextsOfType(t,n).map(function(e){return e.getValue("id")}),s=s.filter(function(e){return v.indexOf(e.getValue("id"))===-1}),s.length&&i.getValue(t,"contexts").appendToListMulti(s))),f=o.continuation,typeof f=="undefined"?f=h:e.Lang.isNumber(f)&&(f+=""),p=f===h,i.continuationKeys[n][t]=f,delete i.getMorePromises[n][l],{type:n,newContexts:s,loadedAll:p}}),this.getMorePromises[n][l]))):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called for an ID that isn't in the registry: "+t):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called without an invalid type: "+n)},getContextsOfType:function(t,n){return n=e.Array(n),this.getValue(t,"contexts").getList().filter(function(e){return n.indexOf(e.registry.name)>-1})},getContextsNotOfType:function(t,n){return n=e.Array(n),this.getValue(t,"contexts").getList().filter(function(e){return n.indexOf(e.registry.name)===-1})},attributes:{contexts:{isCollection:!0},totalGroups:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalSets:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalGalleries:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-getAllContexts-fetcher"]});
YUI.add("album-selection-dialog-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("type",e.type),this.set("photoID",e.photoID),this.set("viewerIsOwner",e.viewerIsOwner),this.set("titleSelect",e.titleSelect?e.titleSelect:this.intlMessage({intlName:"common.SELECT"})),this.set("titleCreate",e.titleCreate?e.titleCreate:this.intlMessage({intlName:"common.NEW"})),this.set("loadingText",e.loadingText?e.loadingText:this.intlMessage({intlName:"common.LOADING_WITH_ELLIPSES"})),this.set("noneText",e.noneText?e.noneText:this.intlMessage({intlName:"common.NONE"})),this.set("noMatchesText",e.noMatchesText?e.noMatchesText:this.intlMessage({intlName:"photo-page-scrappy.NO_MATCHES"})),this.set("placeholderSearch",e.placeholderSearch?e.placeholderSearch:this.intlMessage({intlName:"common.SEARCH"})),this.set("placeholderTitle",e.placeholderTitle?e.placeholderTitle:this.intlMessage({intlName:"common.TITLE"})),this.set("placeholderDescription",e.placeholderDescription?e.placeholderDescription:this.intlMessage({intlName:"common.DESCRIPTION"})),this.set("buttonTextSwitchCreate",e.buttonTextSwitchCreate?e.buttonTextSwitchCreate:this.intlMessage({intlName:"photo-page-scrappy.CREATE_NEW"})),this.set("buttonTextCreate",e.buttonTextCreate?e.buttonTextCreate:this.intlMessage({intlName:"photo-page-scrappy.CREATE_NEW"})),this.set("buttonTextComplete",e.buttonTextComplete?e.buttonTextComplete:this.intlMessage({intlName:"common.DONE"})),this.set("buttonTextCancel",e.buttonTextCancel?e.buttonTextCancel:this.intlMessage({intlName:"common.CANCEL"})),this.set("canCreateNew",e.canCreateNew!=="undefined"?e.canCreateNew:!0),this.set("isMultiplePhotos",e.isMultiplePhotos!=="undefined"?e.isMultiplePhotos:!1),this.set("multiplePhotosBatchSize",e.multiplePhotosBatchSize!=="undefined"?e.multiplePhotosBatchSize:!1),this.previousSearch="",this},buildContainer:function(){return this.setContainerHTML(this.templates("album-selection")({titleSelect:this.get("titleSelect"),loadingText:this.get("loadingText"),noMatchesText:this.get("noMatchesText"),placeholderSearch:this.get("placeholderSearch"),buttonTextComplete:this.get("buttonTextComplete"),buttonTextCancel:this.get("buttonTextCancel")})),this.get("container").addClass("album-selection-dialog-view"),this},activate:function(){var e=this,t=this.get("container"),r;return t.one(".album-selection-search").focus(),r=function(){var n=e.get("albumList"),r;n=e.addExtraTemplateData(n),t.one(".loading li").remove(),t.one(".loading").removeClass("loading"),r=e.templates("album-selection-list")({albums:n,none:e.get("noneText"),buttonTextSwitchCreate:e.get("buttonTextSwitchCreate"),canCreateNew:e.get("canCreateNew")}),t.one(".album-selection-list").setHTML(r),t.one(".album-selection-search").get("value")!==""&&e.handleSearch(),e.moveBelongingAlbumsToTop()},this.initialLoad().then(r).then(null,function(e){n.error({err:e})}),t.delegate("keyup",function(t){e.handleSearch(t)},".album-selection-search"),t.delegate("click",function(t){e.handleDoneClick(t)},".album-selection-done:not(.album-creation-create)"),t.delegate("click",function(t){e.handleCreateSwitchClick(t)},".album-selection-create-switch"),t.delegate("click",function(t){e.handleCancelClick(t)},".album-creation-cancel"),t.delegate("click",function(t){e.handleDoneClick(t)},".ui-dialog-button-close"),t.delegate("click",function(t){e.handleAdditionClick(t)},".album-selection-list-item:not(.belongs-to-album):not(.will-belong-to-album):not(.album-selection-create-switch)"),t.delegate("click",function(t){e.handleRemovalClick(t)},".belongs-to-album:not(.wont-belong-to-album)"),t.delegate("click",function(t){e.handleNewSetClick(t)},".album-creation-create:not([disabled])"),t.delegate("valuechange",function(t){e.handleTitleChange(t)},".album-creation-title"),this},addExtraTemplateData:function(e){var t=this.get("albumListForPhoto"),n=[],r,i;for(i=0;i<t.length;i++)n.push(t[i].getValue("id"));for(r=0;r<e.length;r++)e[r]["class"]="",e[r].machineTitle=this.convertToMachineText(e[r].title),e[r]["class"]+=this.getTitleLengthClass(e[r].title),e[r]["class"]!==""&&(e[r]["class"]+=" "),n.indexOf(e[r].id)>-1&&(e[r]["class"]+="belongs-to-album "),e[r].compoundId&&(e[r].id=e[r].compoundId),e[r].title=e[r].title.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'");return e},appendAlbums:function(e){var t=this.addExtraTemplateData(e),n="",r=this.get("container"),i;for(i=0;i<t.length;i++)n+=this.templates("album-selection-list-item")(t[i]);r.one(".album-selection-list").append(n),r.one(".album-selection-search").get("value")!==""&&this.handleSearch(),this.moveBelongingAlbumsToTop()},getTitleLengthClass:function(e){return e.length>17?"longer-title":e.length>14?"long-title":""},convertToMachineText:function(e){return e.toLowerCase().replace(/\s/gi,"")},moveBelongingAlbumsToTop:function(){var e=this.get("container"),t=e.all(".belongs-to-album"),n=e.one(".album-selection-list"),r;t.size()>0&&(t.remove(),r=n.one(".album-selection-list-item:not(.album-selection-create-switch)"),n.insert(t,r))},switchDoneButton:function(){var e=this.get("container").one(".album-selection-done");e&&e.hasClass("ui-dialog-button-neutral")&&(e.replaceClass("ui-dialog-button-neutral","ui-dialog-button-confirm"),e.one("span").set("text",this.get("buttonTextComplete")))},handleTitleChange:function(e){var t=this.get("container").one(".album-creation-create");e.newVal.length>0&&t.hasAttribute("disabled")?t.removeAttribute("disabled"):e.newVal.length<=0&&!t.hasAttribute("disabled")&&t.setAttribute("disabled")},handleDoneClick:function(t){this.fire("doneClick",t),e.Views.dialog.close(),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionDoneClick")},handleCreateSwitchClick:function(t){var n=this.get("container"),r=n.one(".album-selection-search").get("value"),i=this,s,o;n.one(".album-selection").hide(),n.one(".album-creation"
)?(n.one(".album-creation").show(),s=n.one(".album-creation-title"),r!==""&&(s.set("value",r),this.handleTitleChange({newVal:r})),s.focus(),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionSwitchModeClick")):(o=function(t){n.append(i.templates("album-creation")({titleCreate:i.get("titleCreate"),placeholderTitle:i.get("placeholderTitle"),placeholderDescription:i.get("placeholderDescription"),buttonTextCreate:i.get("buttonTextCreate"),buttonTextCancel:i.get("buttonTextCancel"),multiplePhotos:i.get("isMultiplePhotos"),photoUrl:t})),s=n.one(".album-creation-title"),r!==""&&(s.set("value",r),i.handleTitleChange({newVal:r})),s.focus(),e.rapidTracker.beacon(i.name,i.get("type")+"AlbumSelectionSwitchModeClick")},this.get("isMultiplePhotos")?o():this.appContext.getModel("photo-models",this.get("photoID")).then(function(e){o(e.getSizeToFit({width:80,height:80},{includeSquare:!0,includeSizes:["sq","q"]}).url)}))},handleCancelClick:function(t){var n=this.get("container");n.one(".album-creation").hide(),n.one(".album-selection").show(),this.get("container").one(".album-selection-search").focus(),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionCancelClick")},handleAdditionClick:function(t){t.preventDefault();var r=t.currentTarget.getAttribute("data-album-id"),i=t.currentTarget,s=this;!this.currentlyAdding&&!this.currentlyRemoving&&(this.currentlyAdding=!0,i.addClass("will-belong-to-album"),i.append(this.templates("flickr-balls")({})),this.switchDoneButton(),this.addPhoto(r).then(function(e){var t=s.get("isMultiplePhotos")?e.setModel:e;i.addClass("belongs-to-album"),i.removeClass("will-belong-to-album"),i.one(".balls").remove(),s.currentlyAdding=!1,t.isPending?i.addClass("pending"):i.removeClass("pending"),t&&!t.isInvitation&&t.registry&&t.registry.attributes&&t.registry.attributes.photoCountDisplay&&i.one(".album-selection-list-item-stats").replace(s.templates("album-selection-list-item-stats")({photoCountDisplay:t.getValue("photoCountDisplay")}));if(s.get("isMultiplePhotos")&&t&&s.get("photoID").split(",").length>1)return t.remove(),s.appContext.getModelRegistry("sets-models").then(function(e){e.exists(s.appContext.getViewer().nsid)&&e.remove(s.appContext.getViewer().nsid)})}).then(null,function(e){i.removeClass("will-belong-to-album"),i.one(".balls").remove(),n.error({err:e}),s.currentlyAdding=!1}),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionAdditionClick"))},handleRemovalClick:function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-album-id"),r=t.currentTarget,i=this;!this.currentlyRemoving&&!this.currentlyAdding&&(this.currentlyRemoving=!0,r.removeClass("belongs-to-album"),r.removeClass("pending"),r.addClass("wont-belong-to-album"),r.append(this.templates("flickr-balls")({})),this.switchDoneButton(),this.removePhoto(n).then(function(e){var t,n=!1;r.one(".balls").remove(),r.removeClass("wont-belong-to-album"),i.currentlyRemoving=!1,i.get("isMultiplePhotos")&&e[0]===null?n=!0:!i.get("isMultiplePhotos")&&e===null&&(n=!0),n?(r.remove(),i.handleSearch()):(t=i.get("isMultiplePhotos")?e[0]:e,r.one(".album-selection-list-item-stats").replace(i.templates("album-selection-list-item-stats")({photoCountDisplay:t.getValue("photoCountDisplay")})));if(i.get("isMultiplePhotos")&&t&&i.get("photoID").split(",").length>1)return t.remove(),i.appContext.getModelRegistry("sets-models").then(function(e){e.exists(i.appContext.getViewer().nsid)&&e.remove(i.appContext.getViewer().nsid)})}).then(null,function(e){r.addClass("belongs-to-album"),r.addClass("pending"),i.currentlyRemoving=!1,r.removeClass("wont-belong-to-album")}),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionRemovalClick"))},handleNewSetClick:function(t){var n=this,r=this.get("container"),i=r.one(".album-creation-title").get("value"),s=r.one(".album-creation-description").get("value"),o,u,a,f;r.one(".album-creation-create").setAttribute("disabled"),this.switchDoneButton(),this.createNewAndAddPhoto(i,s).then(function(e){return r.one(".album-creation").remove(),r.one(".album-selection").show(),u=n.getTitleLengthClass(e.getValue("title"))+" ",f=e.registry.attributes.compoundId?e.getValue("compoundId"):e.getValue("id"),o=n.templates("album-selection-list-item")({"class":u+"belongs-to-album",id:f,bestIconURL:e.getValue("bestIconURL"),title:e.getValue("title"),machineTitle:n.convertToMachineText(e.getValue("title")),photoCountDisplay:e.getValue("photoCountDisplay")}),r.one(".none")&&r.one(".none").remove(),a=r.one(".album-selection-list").one(".album-selection-list-item:not(.album-selection-create-switch)"),a?r.one(".album-selection-list").insert(o,a):r.one(".album-selection-list").append(o),r.one(".album-selection-search").set("value",""),n.handleSearch(),n.appContext.getModelRegistry("sets-models").then(function(e){e.exists(n.appContext.getViewer().nsid)&&e.remove(n.appContext.getViewer().nsid)})}).then(null,function(e){r.one(".album-creation-create").removeAttribute("disabled")}),e.rapidTracker.beacon(this.name,this.get("type")+"AlbumSelectionNewAlbumClick")},handleSearch:function(e){var t=this.get("container"),n=this.convertToMachineText(t.one(".album-selection-search").get("value")),r=t.all(".album-selection-list-item"),i=t.one(".album-selection-list"),s;if(!r.size())return;r.each(function(e,t){var r=e.getAttribute("data-machine-title");e.toggleClass("hidden",r.indexOf(n)===-1)}),s=r.filter(".hidden").size(),s===r.size()&&!i.hasClass("no-matches")&&i.addClass("no-matches").append('<li class="no-matches-text">'+this.get("noMatchesText")+"</li>"),s<r.size()&&i.hasClass("no-matches")&&(i.removeClass("no-matches"),t.one(".no-matches-text").remove())}})},"@VERSION@",{requires:["flickr-view","hermes-template-flickr-balls","hermes-template-album-selection","hermes-template-album-creation","hermes-template-album-selection-list","hermes-template-album-selection-list-item","hermes-template-album-selection-list-item-stats"],optional:["set-models"],langBundles:["common","groups","photo-page-scrappy"
]});
YUI.add("set-selection-dialog-view",function(e,t){var n=require("lib/flog")(t);e.namespace("Views")[this.name]=e.Base.create("set-selection-dialog-view",e.Views["album-selection-dialog-view"],[],{langBundles:this.details.langBundles,initialLoad:function(){var t=this;return this.set("scrappy",this.appContext.flipper.isFlipped("enable-scrappy-photo-page")),this.appContext.flipper.isFlipped("rename-set-to-album")?(this.setLabel=this.intlMessage({intlName:"photo-page-scrappy.ALBUM"}),this.setsLabel=this.intlMessage({intlName:"photo-page-scrappy.ALBUMS"})):(this.setLabel="set",this.setsLabel="sets"),this.set("page",1),this.set("perPage",500),this.appContext.getModel("sets-models",{id:t.appContext.auth.user.nsid,page:t.get("page"),perPage:t.get("perPage")}).then(function(e){t.set("setsModel",e)}).then(function(){var r={setsList:t.get("setsModel").getValue("albumsList").getPage({page:t.get("page"),perPage:t.get("perPage")})};return t.get("isMultiplePhotos")?r.albumsSharedBetweenPhotos=t.appContext.callAPI("flickr.cameraroll.getPhotosMeta",{photo_ids:t.get("photoID"),properties:"albums"},!0):r.setsThePhotoIsIn=t.appContext.getModel("photo-sets-models",t.get("photoID")).then(function(e){return e.getListPageByContinuation(t.get("perPage")).then(function(){return e.getValue("sets").getList()})}),(new e.FlickrPromise(r)).then(function(e){var n=e.setsList,r=e.setsThePhotoIsIn?e.setsThePhotoIsIn:[],i=[],s=[],o;t.get("isMultiplePhotos")&&e.albumsSharedBetweenPhotos.albums&&e.albumsSharedBetweenPhotos.albums.forEach(function(e){s.push({getValue:function(t){return e[t]}})});for(o=0;o<n.length;o++)n[o].getValue("isAutoUploadSet")||i.push(n[o].toJSON());t.set("albumList",i),t.set("albumListForPhoto",t.get("isMultiplePhotos")?s:r),t.set("setsShowingCount",t.get("perPage")),t.recursivelyLoadMore()}).then(null,function(e){throw n.error({err:e}),t.onError({message:t.intlMessage({intlName:"photo-page-scrappy.ERROR_LOADING_ALBUMS"}),err:e,rejuvinate:!1}),e})})},recursivelyLoadMore:function(){var e=this,t=this.get("setsShowingCount"),n=e.get("setsModel").getValue("totalItems"),r;t<n&&n>0&&(e.set("page",e.get("page")+1),this.get("setsModel").getValue("albumsList").getPage({page:e.get("page"),perPage:e.get("perPage")}).then(function(t){for(r=0;r<t.length;r++)t[r]=t[r].toJSON();e.appendAlbums(t),e.set("setsShowingCount",e.get("setsShowingCount")+e.get("perPage")),e.recursivelyLoadMore()}).then(null,function(t){throw e.onError({message:e.intlMessage({intlName:"photo-page-scrappy.ERROR_LOADING_ALBUMS"}),err:t,rejuvinate:!1}),t}))},addPhoto:function(t){var n=this,r=this.get("multiplePhotosBatchSize"),i=[],s=0,o=[],u=[];if(this.get("isMultiplePhotos")){i=this.get("photoID").split(","),s=i.length;while(i.length>0)o.push(i.splice(0,r))}return this.appContext.getModelRegistry("set-models").then(function(r){return n.get("isMultiplePhotos")?(o.forEach(function(e,i){u.push(function(){return r.remote.addPhoto({photoID:e.join(","),isMultiplePhotos:!0,numberOfPhotosSelected:n._params.numberOfPhotosSelected,numberOfVideosSelected:n._params.numberOfVideosSelected,photosSelectedIds:n._params.photosSelectedIds,videosSelectedIds:n._params.videosSelectedIds,updateItemCounts:i===0,setID:t},n.appContext)})}),u.reduce(function(e,t){return e.then(t)},e.Promise.resolve()).then(null,function(e){var t=s>1?"ERROR_ADDING_PHOTOS_TO_ALBUM":"ERROR_ADDING_PHOTO_TO_ALBUM";throw n.onError({message:n.intlMessage({intlName:"photo-page-scrappy."+t}),rejuvinate:!1,err:e}),e})):r.remote.addPhoto({photoID:n.get("photoID"),isMultiplePhotos:n.get("isMultiplePhotos"),setID:t},n.appContext).then(null,function(e){throw n.onError({message:n.intlMessage({intlName:"photo-page-scrappy.ERROR_ADDING_PHOTO_TO_ALBUM"}),err:e}),e})})},removePhoto:function(t){var n=this,r=this.get("multiplePhotosBatchSize"),i=[],s=0,o=[],u=[],a;if(this.get("isMultiplePhotos")){i=this.get("photoID").split(","),s=i.length;while(i.length>0)o.push(i.splice(0,r))}return this.appContext.getModelRegistry("set-models").then(function(r){if(n.get("isMultiplePhotos")){for(a=0;a<o.length;a++)u.push(r.remote.removePhoto({photoID:o[a].join(","),isMultiplePhotos:!0,numberOfPhotosSelected:n._params.numberOfPhotosSelected,numberOfVideosSelected:n._params.numberOfVideosSelected,updateItemCounts:a===0,setID:t},n.appContext));return e.Promise.all(u).then(null,function(e){var t=s>1?"ERROR_REMOVING_PHOTOS_FROM_ALBUM":"ERROR_REMOVING_PHOTO_FROM_ALBUM";throw n.onError({message:n.intlMessage({intlName:"photo-page-scrappy."+t}),rejuvinate:!1,err:e}),e})}return r.remote.removePhoto({photoID:n.get("photoID"),setID:t},n.appContext).then(null,function(e){throw n.onError({message:n.intlMessage({intlName:"photo-page-scrappy.ERROR_REMOVING_PHOTO_FROM_ALBUM"}),err:e}),e})})},createNewAndAddPhoto:function(t,r){var i=this;return this.appContext.getModelRegistry("set-models").then(function(s){return s.remote.create({photoID:i.get("photoID").split(",")[0],title:t,description:r,isMultiplePhotos:i.get("isMultiplePhotos"),numberOfPhotosSelected:i._params.numberOfPhotosSelected,numberOfVideosSelected:i._params.numberOfVideosSelected},i.appContext).then(function(t){var n=[],r=i.get("photoID").split(",");return i.get("isMultiplePhotos")&&(r=r.slice(1),r.length>0&&n.push(i.addPhoto(t.getValue("id")))),e.Promise.all(n).then(function(){return t})},function(e){throw i.onError({message:i.intlMessage({intlName:"photo-page-scrappy.ERROR_CREATING_ALBUM"}),rejuvinate:i.get("isMultiplePhotos")?!1:!0,err:e}),e}).catch(function(e){n.error("Error handing photo addition after album creation",{err:e})})})},onError:function(t){var n=this.get("container"),r,i=typeof t.rejuvinate=="undefined"?!0:t.rejuvinate,s,o=this;this.fire("error",t),s=e.Views.dialog.getNewInstance("dialog-alert",{content:t.message,attrs:{title:this.intlMessage({intlName:"common.ERROR"}),level:"warning",confirmLabel:this.intlMessage({intlName:"common.OK"})},parent:o,visibleShim:!0,dialogClass:o.get("scrappy")?"scrappy-dialog":undefined}),s.show(),i&&s.on("dismiss",function(t){r=
e.Views.dialog.getNewInstance("dialog-modal",{content:n,appContext:o.appContext,dialogClass:o.get("scrappy")?"scrappy-dialog":undefined}),r.show()})}})},"@VERSION@",{requires:["flickr-view","album-selection-css","album-selection-dialog-view"],optional:["set-models"],langBundles:["common","groups","photo-page-scrappy"]});
YUI.add("cameraroll-tray-album-button-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e;return e=this.templates("cameraroll-tray-album-button")({}),this.setContainerHTML(e),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.one(".album-selected-photos").on("click",this.handleAddToAlbumClick.bind(this))),this},handleAddToAlbumClick:function(n){n.preventDefault();var r,i=this,s=e.CameraRollSelectionManager.getSelection(),o=s.length,u,a;u=s.map(function(t){return e.CameraRollViewModel.getPhotoIDByGUID(t)}),e.Promise.all(u).then(function(n){var s,u;return a=e.Array.dedupe(n),o=a.length,e.rapidTracker.beacon(t,"cameraRollAddToAlbumClick",{count:o}),u=function(e,t){var n=e.getValue("dateTaken"),r=t.getValue("dateTaken");return n>r?1:n<r?-1:0},s=a.map(function(e){return i.appContext.getModel("cameraroll-thumbnail-models",e)}),e.Promise.all(s).then(function(t){var n=0,s=[],f=[],l=0;t.sort(u),t.forEach(function(e){e.getValue("isVideo")?(f.push(e.getValue("id")),l++):(s.push(e.getValue("id")),n++)}),a=t.map(function(e){return e.id}),r=(new e.Views.FluidModal({appContext:i.appContext,title:i.intlMessage({intlName:"cameraroll.ADD_TO_ALBUMS_PLURAL",count:o}),subview:new e.Views["set-selection-dialog-view"]({type:"sets",titleSelect:i.intlMessage({intlName:"cameraroll.ADD_TO_ALBUMS_PLURAL",count:o}),titleCreate:i.intlMessage({intlName:"more-menu-view.CREATE_NEW_ALBUM"}),loadingText:i.intlMessage({intlName:"more-menu-view.LOADING_ALBUMS"}),noneText:i.intlMessage({intlName:"more-menu-view.NO_ALBUMS"}),placeholderSearch:i.intlMessage({intlName:"photo-page-scrappy.SEARCH_ALBUMS"}),placeholderTitle:i.intlMessage({intlName:"more-menu-view.ALBUM_TITLE_PLACEHOLDER"}),placeholderDescription:i.intlMessage({intlName:"more-menu-view.DESCRIPTION_PLACEHOLDER"}),buttonTextSwitchCreate:i.intlMessage({intlName:"more-menu-view.CREATE_NEW_ALBUM"}),buttonTextCreate:i.intlMessage({intlName:"more-menu-view.CREATE_ALBUM"}),buttonTextComplete:i.intlMessage({intlName:"common.DONE"}),buttonTextCancel:i.intlMessage({intlName:"more-menu-view.BACK_TO_ALBUMS"}),canCreateNew:!0,photoID:a.join(","),isMultiplePhotos:!0,numberOfPhotosSelected:n,numberOfVideosSelected:l,photosSelectedIds:s,videosSelectedIds:f,multiplePhotosBatchSize:50,appContext:i.appContext}),actionButtonLabel:i.intlMessage({intlName:"common.DONE"}),classList:"fluid-album-modal cameraroll scrappy-dialog",showCancelButton:!1,showActionButton:!1,showFooter:!1,width:748,height:514})).show(),r.get("subview").on("doneClick",function(){r.close()})})})},onError:function(t){var n=this,r;r=new e.Views.FluidModal({appContext:this.appContext,title:n.intlMessage({intlName:"common.ERROR"}),message:t,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),r.show()}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","hermes-template-cameraroll-tray-album-button","cameraroll-tray-css","scrappy-dialogs-css","cameraroll-selection-manager","cameraroll-view-model","hermes-template-flickr-balls","fluid-balls-css","set-selection-dialog-view"],langBundles:["cameraroll","common","photo-page-scrappy","more-menu-view"],optional:[]});
YUI.add("hermes-lang-more-menu-view",function(e,t){e.Intl.add("hermes/more-menu-view","en-US",{ADD_TO_ALBUM:["Add to album"],ADD_TO_SET:["Add to set"],ADD_TO_GROUP:["Add to group"],INVITE_TO_GROUP:["Invite to group"],ADD_TO_GALLERY:["Add to Gallery"],ADD_TO_REMOVE_FROM_ALBUM:["Add to / remove from album"],ADD_TO_REMOVE_FROM_SET:["Add to / remove from set"],ADD_TO_REMOVE_FROM_GALLERY:["Add to / remove from gallery"],ADD_TO_REMOVE_FROM_GROUP:["Add to / remove from group"],INVITE_TO_REMOVE_FROM_GROUP:["Invite to / remove from group"],FLAG_PHOTO:["Flag this Photo?"],FLAG:["Flag photo"],MARK_FOR_REVIEW:["Mark for review"],PHOTO_HAS_BEEN_FLAGGED:["This photo has been flagged"],PROBLEM_FLAGGING:["There was a problem flagging this photo"],ADD_PHOTO_TO_GROUP:["Add this photo to a group"],INVITE_PHOTO_TO_GROUP:["Invite this photo to a group"],ADD_PHOTO_TO_GALLERY:["Add this photo to a gallery"],ADD_PHOTO_TO_ALBUM:["Add photo to an album"],ADD_PHOTO_TO_SET:["Add photo to a set"],NO_GROUPS:["You're not in any groups! <a href='//www.flickr.com/groups'>Why not join one</a>?"],NO_GROUPS2:["You're not in any groups! <a href='","${url}","'>Why not join one</a>?"],NO_GROUPS_ADMIN:["You're not an admin of any groups! <a href='//www.flickr.com/groups_create.gne'>Why not create one</a>?"],NO_GROUPS_ADMIN2:["You're not an admin of any groups! <a href='","${url}","'>Why not create one</a>?"],NO_GALLERIES:["No galleries"],NO_ALBUMS:["No albums"],NO_SETS:["No sets"],LOADING_GROUPS:["Loading groups..."],LOADING_GALLERIES:["Loading galleries..."],LOADING_ALBUMS:["Loading albums..."],LOADING_SETS:["Loading sets..."],SEARCH_GROUPS_PLACEHOLDER:["search groups"],SEARCH_GALLERIES_PLACEHOLDER:["search galleries"],SEARCH_ALBUMS_PLACEHOLDER:["search albums"],SEARCH_SETS_PLACEHOLDER:["search sets"],GALLERY_TITLE_PLACEHOLDER:["gallery title (required)"],GALLERY_DESCRIPTION_PLACEHOLDER:["gallery description"],ALBUM_TITLE_PLACEHOLDER:["Album title"],SET_TITLE_PLACEHOLDER:["Set title"],DESCRIPTION_PLACEHOLDER:["Description (optional)"],CREATE_NEW_GALLERY:["Create a new gallery"],CREATE_NEW_ALBUM:["Create new album"],CREATE_NEW_SET:["Create new set"],CREATE_GALLERY:["Create gallery"],CREATE_SET:["Create set"],CREATE_ALBUM:["Create album"],BACK_TO_GALLERIES:["Back to current galleries"],BACK_TO_ALBUMS:["Back to current albums"],BACK_TO_SETS:["Back to current sets"],GROUP_PRIVACY_WARNING:["This photo is private. If you add it to a group, the members of that group will be able to view, comment on, tag and add notes to it."],DONT_SHOW_ME_AGAIN:["Don't show me this message again"],DELETE_PHOTO:["Delete Photo"],PERMANENTLY_DELETE_PHOTO:["Permanently Delete This Photo"],PROBLEM_DELETING:["There was a problem deleting this photo"],ADD_LOCATION:["Add Location"],ADD_PEOPLE:["Add people"],DOWNLOAD_ALL_SIZES:["Download / All sizes"],EDIT_DATES:["Edit dates"],EDIT_TITLE_TAGS_DATES:["Edit title, tags, and dates"],ROTATE:["Rotate"],REPLACE:["Replace"],VIDEOS_NO_EDIT_IN_AVIARY:["Videos cannot be edited in Aviary"],EDIT_IN_AVIARY:["Edit in Aviary"],COMMENTING:["Commenting"],REPORT_ABUSE:["Report abuse"],FEEDBACK:["Feedback"],PEOPLE_TAGGING:["People tagging!"],OPEN_IN_ORGANIZER:["Open In Organizr"],MORE_ACTIONS:["More Actions"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-cameraroll-tray-download-button",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="download-selected-photos">\n	<i class="download-photos-icon"></i>\n	<span>',u={hash:{intlName:"common.DOWNLOAD"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+"</span>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/cameraroll-tray-download-button",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-bulk-download-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<p>",s={hash:{intlName:"album-page.DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n",r}function h(e,t){var r="",i,s;return r+="\n	<p>",s={hash:{intlName:"album-page.ALOT_OF_PHOTOS"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n",r}function p(e,t){var r="",i;r+="\n	<ul>\n		",i=n.each.call(e,e.downloadURLs,{hash:{},inverse:l.noop,fn:l.program(6,d,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n",r}function d(e,t){var r="",i,s,o;return r+="\n			<li>\n				<span>\n					",o={hash:{intlName:"album-page.DOWNLOAD_ZIP_PART",partSequence:e.partSequence},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+'\n				</span>\n				<a class="butt mini" href="',(s=n.url)?s=s.call(e,{hash:{},data:t}):(s=e.url,s=typeof s===f?s.apply(e):s),r+=a(s)+'">',o={hash:{intlName:"common.DOWNLOAD"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</a>\n			</li>\n		",r}function v(e,t){var r="",i,s;return r+='\n	<a class="butt mini" href="'+a((i=(i=(i=e.downloadURLs,i==null||i===!1?i:i[0]),i==null||i===!1?i:i.url),typeof i===f?i.apply(e):i))+'">',(s=n.buttonLabel)?s=s.call(e,{hash:{},data:t}):(s=e.buttonLabel,s=typeof s===f?s.apply(e):s),r+=a(s)+"</a>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n.unless.call(t,t.isOwnAlbum,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.isMany,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.isMany,{hash:{},inverse:l.program(8,v,i),fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/bulk-download-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("cameraroll-tray-download-button-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e;return e=this.templates("cameraroll-tray-download-button")({}),this.setContainerHTML(e),this},activate:function(){var t=this.get("container");return this.bulkDownloaderView=new e.BulkDownloaderView({appContext:this.appContext,isOwnAlbum:!0}),this.registerEventHandler(t.one(".download-selected-photos").on("click",this.handleDownloadClick.bind(this))),this},destructor:function(){this.bulkDownloaderView.destroy()},handleDownloadClick:function(n){var r=this,i=e.CameraRollSelectionManager.getSelection(),s,o,u;o=this.bulkDownloaderView.showLoadingDialog(),e.rapidTracker.beacon(this.name,"openDownloadAlbum"),s=i.map(function(t){return e.CameraRollViewModel.getPhotoIDByGUID(t)}),e.Promise.all(s).then(function(n){return u=e.Array.dedupe(n),e.rapidTracker.beacon(t,"cameraRollDownloadClick",{count:u.length}),r.bulkDownloaderView.prepareArchive({photo_ids:u.join(","),owner_id:r.appContext.getViewer().nsid}).then(function(e){o.close(),r.bulkDownloaderView.showDownloadDialog(e)})}).catch(function(e){o.close(),r.onError(e)})},onError:function(t){var n=this,r;r=new e.Views.FluidModal({appContext:this.appContext,title:n.intlMessage({intlName:"common.ERROR"}),message:t,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),r.show()}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","hermes-template-cameraroll-tray-download-button","hermes-template-bulk-download-modal","cameraroll-tray-css","scrappy-dialogs-css","cameraroll-selection-manager","cameraroll-view-model","hermes-template-flickr-balls","fluid-balls-css","bulk-download-modal-css","set-selection-dialog-view"],optionalRequires:["bulk-downloader-view"],langBundles:["cameraroll","common","photo-page-scrappy","more-menu-view","album-page"],optional:[]});
YUI.add("hermes-lang-album-page",function(e,t){e.Intl.add("hermes/album-page","en-US",{PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} photo",other:"${#} photos"}}],VIDEOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} video",other:"${#} videos"}}],VIEWS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} view",other:"${#} views"}}],BACK_TO_ALBUMS:["Back to albums list"],EDIT_IN_ORGANIZR:["Edit in Organizr"],EDIT_COVER:["Edit cover"],SELECT_COVER_PHOTO:["Select a cover photo"],SELECT:["Select"],ERROR_COVER_PHOTO:["There was a problem trying to set your cover photo. Please try again."],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:["There was an error updating the album's title and description."],ALBUM_ADD_DESCRIPTION:["Click here to enter a description for this album"],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:["There was a problem creating the book for this album. Please try again later."],ALBUM_DESCRIPTION:["Album description"],CREATE_BOOK_FROM_ALBUM:["Make a book from this Album"],DOWNLOAD_PHOTOS_AND_VIDEO:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," & ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_PHOTOS:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}],DOWNLOAD_VIDEOS:["Download ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_ZIP:["Download zip"],DOWNLOAD_ZIP_PART:["Download zip part ","${partSequence}"],ALOT_OF_PHOTOS:["Wow, that's a lot of photos! Click to download each batch as a zip file."],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:["There are no photos or videos available in this album for you to download."],DOWNLOAD_ALBUM_DISABLED_ERROR:["Album downloading is currently unavailable. Please try again in a minute."],DOWNLOAD_ALBUM_GENERIC_ERROR:["There was an error downloading this album. Please try again."],DOWNLOAD_ALBUM_LICENSE_MESSAGE:["These photos may have one or more license types. Please visit the individual photo page for more information about the license prior to downloading this album."],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:["These photos may have one or more license types. Prior to downloading this album, please visit the individual photo pages to understand the designated license type for each image"],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:["These photos may have one or more license types or their rights may be reserved. Prior to downloading this album, please visit the individual photo pages to understand the designated license type for each image."],DOWNLOAD_ALBUM_LEARN_MORE:['Learn more at <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:["Do you really want to delete this album? (Don't worry, none of the contents will be deleted.)"],DELETE_THIS_ALBUM:["Delete this album"],SHARE_THIS_ALBUM:["Share this album"],CREATE_NEW_ALBUM:["Create new album"],SORT:["Sort"],SORT_DATE_TAKEN_OLDEST:["Sort by date taken (oldest first)"],SORT_DATE_TAKEN_NEWEST:["Sort by date taken (newest first)"],SORT_DATE_UPLOADED_OLDEST:["Sort by date uploaded (oldest first)"],SORT_DATE_UPLOADED_NEWEST:["Sort by date uploaded (newest first)"],SORT_ALPHABETICALLY:["Alphabetically"],SORT_RANDOMLY:["Randomly"],SORT_REVERSE:["Reverse current order"],SORT_ALMOST_DONE:["Almost done..."],TIMEOUT_FAILURE:["We're having some trouble displaying this album at the moment. Please try again."]})},"@VERSION@",{requires:["intl"]});
YUI.add("bulk-downloader-view",function(e,t){"use strict";e.BulkDownloaderView=e.Base.create("BulkDownloaderView",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.localizeLib=e.mix({langBundles:["common","album-page","cameraroll"],appContext:this.appContext},e.Localizable),this.set("isOwnAlbum",t.isOwnAlbum)},showLoadingDialog:function(){var t=(new e.Views.FluidModal({appContext:this.appContext,showCancelButton:!1,showFooter:!1,showActionButton:!1,title:this.localizeLib.intlMessage({intlName:"cameraroll.PREPARING_DOWNLOAD"}),message:this.templates("flickr-balls")({}),classList:"bulk-download-loading-dialog"})).show();return t},prepareArchive:function(e){var t=this;return this.appContext.callAPI("flickr.download.archives.create",e).then(function(e){var n=e.archive.countPhotos,r=e.archive.countVideos,i=[],s,o;if(n>0&&r>0)s=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_PHOTOS_AND_VIDEO",photoCount:n,videoCount:r});else if(n>0&&r===0)s=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_PHOTOS",photoCount:n});else{if(!(n===0&&r>0))throw new Error(t.localizeLib.intlMessage({intlName:"cameraroll.DOWNLOAD_NOT_AVAILABLE_ERROR"}));s=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_VIDEOS",videoCount:r})}return r+n>1?o=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_ZIP"}):n===1&&r===0?o=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_PHOTOS",photoCount:n}):n===0&&r===1&&(o=t.localizeLib.intlMessage({intlName:"album-page.DOWNLOAD_VIDEOS",videoCount:r})),i=e.archive.urls.map(function(e,t){return{url:e,partSequence:t+1}}),{title:s,downloadURLs:i,buttonLabel:o}}).catch(function(e){throw e.code===105?new Error(t.localizeLib.intlMessage({intlName:"cameraroll.DOWNLOAD_DISABLED_ERROR"})):new Error(t.localizeLib.intlMessage({intlName:"cameraroll.DOWNLOAD_GENERIC_ERROR"}))})},showDownloadDialog:function(n){var r=n.title,i=n.downloadURLs,s;return s=(new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,showFooter:!1,showActionButton:!1,title:r,message:this.templates("bulk-download-modal")({isMany:i.length>1,downloadURLs:i,buttonLabel:n.buttonLabel,isOwnAlbum:this.get("isOwnAlbum")}),classList:"bulk-download-dialog"})).show(),s.on("activated",function(){s.get("container").all(".butt").on("click",function(n){i.length===1?(e.rapidTracker.beacon(t,"completeArchiveDownloadClick"),s.close()):(e.rapidTracker.beacon(t,"partialArchiveDownloadClick"),n.target.addClass("is-disabled"))})}),s},onError:function(t){var n=new e.Views.FluidModal({appContext:this.appContext,title:this.localizeLib.intlMessage({intlName:"common.ERROR"}),message:t.message,actionButtonLabel:this.localizeLib.intlMessage({intlName:"common.OK"}),showCancelButton:!1});n.show()}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-modal-view","hermes-template-bulk-download-modal","hermes-template-flickr-balls","fluid-balls-css","bulk-download-modal-css"],langBundles:["common","album-page","cameraroll"],optional:[],affinity:"client"});
YUI.add("cameraroll-thumbnail-models",function(e,t){function r(e){r.superclass.constructor.call(this,e)}var n=require("lib/flog")(t);e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,serialize:function(){return JSON.stringify(this._data)},deserialize:function(e){this._data=JSON.parse(e)},getFarmURL:function(t,r){return r==="o"?(n.warn("getFarmURL doesn't return originals"),""):e.config.flickr.cameraroll.use_ycs_ct_urls?e.URLHelper.getFarmURLWithPrefix(this.getValue(t,"ycsUrlPrefix"),t,this.getValue(t,"secret"),r):e.URLHelper.getFarmURL(this.getValue(t,"farm"),this.getValue(t,"server"),t,this.getValue(t,"secret"),r)},normalize:function(e){var t={farm:e.farm,server:e.server,secret:e.secret,ycsUrlPrefix:e.ycsUrlPrefix,dateCreate:e.dateCreate,dateCreateTz:e.dateCreateTz,dateTaken:e.dateTaken,dateTakenGranularity:e.dateTakenGranularity,isPublic:e.ispublic==="1"||e.ispublic===1?!0:!1,isVisibleByFriends:e.isfriend==="1"||e.isfriend===1?!0:!1,isVisibleByFamily:e.isfamily==="1"||e.isfamily===1?!0:!1,isVideo:e.isVideo==="1"?!0:!1,views:e.views};return this.appContext.flipper.isFlipped("enable-cr-preview")&&(t.rawSizes={width_s:e.width_s,height_s:e.height_s,width_n:e.width_n,height_n:e.height_n,width_m:e.width_m,height_m:e.height_m,width_t:e.width_t,height_t:e.height_t,width_c:e.width_c,height_c:e.height_c,width_l:e.width_l,height_l:e.height_l,width_h:e.width_h,height_h:e.height_h,width_k:e.width_k,height_k:e.height_k,width_q:e.width_q,height_q:e.height_q,width_z:e.width_z,height_z:e.height_z,secret_h:e.secret_h,secret_k:e.secret_k}),e.dateTakenUnknown&&parseInt(e.dateTakenUnknown,10)&&(t.isDateTakenUnknown=!0),t},getSizeToFit:e.PhotoModelHelper.getSizeToFit,getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,attributes:{farm:{},server:{},secret:{},ycsUrlPrefix:{},views:{},dateCreate:{},dateCreateTz:{},dateTaken:{},dateTakenGranularity:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFriends:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVisibleByFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isDateTakenUnknown:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isVideo:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},rawSizes:{},sizes:{readOnly:!0,derivedBy:["rawSizes"],defaultFn:function(e){var t=this.getValue(e,"rawSizes"),n=this,r={};return t&&Object.keys(t).forEach(function(i){var s,o,u;i.match(/width_/)&&(s=i.match(/width_([a-z])/)[1],r[s]||(r[s]={}),r[s].width=parseInt(t[i],10),s==="h"?u=t.secret_h:s==="k"?u=t.secret_k:u=n.getValue(e,"secret"),o=s==="s"?"m":s,o=s==="l"?"b":s,r[s].displayUrl="//farm"+n.getValue(e,"farm")+".staticflickr.com/"+n.getValue(e,"server")+"/"+e+"_"+u+"_"+o+".jpg",r[s].url=n.getValue(e,"ycsUrlPrefix").replace(/https\:/,"")+"/"+e+"_"+u+"_"+o+".jpg",r[s].src=n.getValue(e,"ycsUrlPrefix").replace(/https\:/,"")+"/"+e+"_"+u+"_"+o+".jpg",r[s].key=s),i.match(/height_/)&&(s=i.match(/height_([a-z])/)[1],r[s]||(r[s]={}),r[s].height=parseInt(t[i]))}),r}}}})},"@VERSION@",{requires:["url-helper","flickr-model-registry","attribute-helpers","photo-model-helper"]});
YUI.add("hermes-template-fluid-share",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" disable-sharing"}function h(e,t){var r="",i,s;return r+=' title="',s={hash:{intlName:"share-modal.SHARING_DISABLED"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'" ',r}function p(e,t){var r="",i;return r+=' title="',(i=n.shareTooltip)?i=i.call(e,{hash:{},data:t}):(i=e.shareTooltip,i=typeof i===f?i.apply(e):i),r+=a(i)+'"',r}function d(e,t){var r="",i,s;r+="\n		<span ",i=n["if"].call(e,e.sharingDisabled,{hash:{},inverse:l.program(5,p,t),fn:l.program(3,h,t),data:t});if(i||i===0)r+=i;return r+=' class="fluid-share-button-label">',s={hash:{intlName:"share-modal.SHARE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div class="fluid-share-button ',(o=n.extraShareButtonClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonClassList,o=typeof o===f?o.apply(t):o),s+=a(o),o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+='"\n',o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=">\n\n	<span ",o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=' class="fluid-share-icon ',(o=n.extraShareButtonIconClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonIconClassList,o=typeof o===f?o.apply(t):o),s+=a(o)+'"></span>\n	',o=n["if"].call(t,t.showShareButtonLabel,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;return s+="\n\n </div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-tumblr-post",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<strong>",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+' <a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',s={hash:{intlName:"common.BY_USER",user:e.ownerName},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></strong>\n",r}function h(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.ownerURL,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function d(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.linkToShare)?i=i.call(e,{hash:{},data:t}):(i=e.linkToShare,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function v(e,t){var r="",i,s;return r+="\n	<br /><i>",s={hash:{intlName:"share-modal.VIA_FLICKR"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</i>\n	<br />",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.description,s):f.call(e,"renderTrustedMarkup",e.description,s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t.ownerName,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.description,{hash:{},inverse:l.noop,fn:l.program(8,v,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-tumblr-post",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-loading-state",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this;s+="<!-- okay, not ideal, but this is just a loading state so we inline some styles -->\n<style>\n.icons-1x-sprite{background:url('/images/../images/icons-1x-s5f9484e8cf.png') no-repeat}.icons-2x-sprite{background:url('/images/../images/icons-2x-s7c34d6f430.png') no-repeat}.books-1x-sprite{background:url('/images/../images/books/books-1x-s6139b456a1.png') no-repeat}.books-2x-sprite{background:url('/images/../images/books/books-2x-s7fd551ad4b.png') no-repeat}.embedr-1x-sprite{background:url('/images/../images/embedr/embedr-1x-s78fee6dbc0.png') no-repeat}.embedr-2x-sprite{background:url('/images/../images/embedr/embedr-2x-sa70b5745c1.png') no-repeat}.scrappy-1x-sprite{background:url('/images/../images/scrappy/scrappy-1x-s2534f3fcd5.png') no-repeat}.scrappy-2x-sprite{background:url('/images/../images/scrappy/scrappy-2x-s48fc148735.png') no-repeat}.badges-1x-sprite{background:url('/images/../images/badges/badges-1x-s62c2236d54.png') no-repeat}.badges-2x-sprite{background:url('/images/../images/badges/badges-2x-s9a94302ec1.png') no-repeat}.wallet-1x-sprite{background:url('/images/../images/wallet/wallet-1x-s642c161a5b.png') no-repeat}.wallet-2x-sprite{background:url('/images/../images/wallet/wallet-2x-sb954dcbc88.png') no-repeat}.general-1x-sprite{background:url('/images/../images/general/general-1x-s1afd66c509.png') no-repeat}.general-2x-sprite{background:url('/images/../images/general/general-2x-s919633f2a8.png') no-repeat}.marketplace-1x-sprite{background:url('/images/../images/marketplace/marketplace-1x-s55ba5752d0.png') no-repeat}.marketplace-2x-sprite{background:url('/images/../images/marketplace/marketplace-2x-s529b40de42.png') no-repeat}.wallart-1x-sprite{background:url('/images/../images/wallart/wallart-1x-s16d0f44d62.png') no-repeat}.wallart-2x-sprite{background:url('/images/../images/wallart/wallart-2x-s4156e49d66.png') no-repeat}.cameraroll-1x-sprite{background:url('/images/../images/cameraroll/cameraroll-1x-sb0eb00865b.png') no-repeat}.cameraroll-2x-sprite{background:url('/images/../images/cameraroll/cameraroll-2x-s14c3067377.png') no-repeat}.groups-1x-sprite{background:url('/images/../images/groups/groups-1x-sc426e8a255.png') no-repeat}.groups-2x-sprite{background:url('/images/../images/groups/groups-2x-sb56ae95889.png') no-repeat}.storefront-1x-sprite{background:url('/images/../images/storefront/storefront-1x-s7ed4af2be2.png') no-repeat}.storefront-2x-sprite{background:url('/images/../images/storefront/storefront-2x-s34622659c6.png') no-repeat}.stats-1x-sprite{background:url('/images/../images/stats/stats-1x-sac7a1b4e9c.png') no-repeat}.stats-2x-sprite{background:url('/images/../images/stats/stats-2x-saf6bac449d.png') no-repeat}@keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-moz-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-webkit-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-ms-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-o-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-moz-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-webkit-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-ms-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-o-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}.fluid .balls{position:relative;width:24px;height:12px;margin:0 auto;display:inline-block}.fluid .balls::before,.fluid .balls::after{position:absolute;top:0;width:12px;height:12px;content:'';border-radius:100%;-webkit-animation:pinkBall 1.6s ease-in-out infinite;-moz-animation:pinkBall 1.6s ease-in-out infinite;-ms-animation:pinkBall 1.6s ease-in-out infinite;-o-animation:pinkBall 1.6s ease-in-out infinite;animation:pinkBall 1.6s ease-in-out infinite}.fluid .balls::before{background:#ff329c;left:0}.fluid .balls::after{-webkit-animation:blueBall 1.6s ease-in-out infinite;-moz-animation:blueBall 1.6s ease-in-out infinite;-ms-animation:blueBall 1.6s ease-in-out infinite;-o-animation:blueBall 1.6s ease-in-out infinite;animation:blueBall 1.6s ease-in-out infinite;background:#0063dc;right:0}#yui3-css-stamp.fluid-balls-css{display:none}\n\n.fluid.sharing-loader .balls {\n	margin: 80px auto;\n	display: block;\n}\n</style>\n\n\n<div class=\"sharing-loader fluid\">\n	",o=u.invokePartial(r["flickr-balls"],"flickr-balls",t,n,r,i);if(o||o===0)s+=o;return s+="\n</div>",s}),r={};e.Array.each(["flickr-balls"],function(t){var n=e.Template.get("hermes/"+
t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-loading-state",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});
YUI.add("hermes-template-fluid-share-panel",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" sharing-type-disabled"}function d(e,t){return" sharing-type-enabled"}function v(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.facebook),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function m(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.tumblr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function g(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.twitter),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function y(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.pinterest),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.flickr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function w(e,t){return" single-link-field"}function E(e,t){return" single-link"}function S(e,t){var r="",i,s,o;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(20,x,t),data:t},s=(i=n.isFlipped||e.isFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(23,N,t),data:t},s=(i=n.isNotFlipped||e.isNotFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isNotFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(28,L,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function x(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function T(e,t){var r="",i,s;return r+='\n									<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n								",r}function N(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(24,C,t),data:t});if(s||s===0)r+=s;r+="\n\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(26,k,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function C(e,t){return'\n									<span class="link-type-button embed-type-button">HTML</span>\n								'}function k(e,t){return'\n									<span class="link-type-button iframe-type-button">IFRAME</span>\n								'}function L(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function A(e,t){return" single-highlight"}function O(e,t){var r="",i;r+='\n						<div class="grab-link-only grab-link">\n\n							',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(33,M,t),data:t});if(i||i===0)r+=i;r+='\n\n							<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n							<div class="grab-link-loader ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(36,D,t),data:t});if(i||i===0)r+=i;r+=" ",i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(38,P,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder hide-reminder',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(40,H,t),data:t});if(i||i===0)r+=i;r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n								",i=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:h.noop,fn:h.program(42,B,t),data:t});if(i||i===0)r+=i;return r+="\n							</div>\n\n						</div>\n					",r}function M(e,t){var r="",i;r+="\n								",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(34,_,t),data:t});if(i||i===0)r+=i;return r+="\n							",r}function _(e,t){var r="",i;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								',r}function D(e,t){return" no-permission-loader"}function P(e,t){return"no-permission-loader"}function H(e,t){return" with-guestpasses "}function B(e,t){var r="",i,s;return r+='<div class="grab-link-download-reminder">',(i=n.downloadAccessString)?i=i.call(e,{hash:{},data:t}):(i=e.downloadAccessString,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",s={hash:{intlName:"share-modal.CHANGE_DOWNLOAD_PREF",url:"/account/prefs/downloads/"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</div>",r}function j(e,t){var r="",i,s;r+='\n						<div class="sliding-frame">\n\n							<div class="link-type-content grab-link">\n\n								',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(45,F,t),data:t});if(i||i===0)r+=i;r+='\n\n								<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n								<div class="grab-link-loader ',i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse
:h.noop,fn:h.program(38,P,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n								<div class="grab-link-reminders">\n									<div class="grab-link-privacy-reminder ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.program(40,H,t),fn:h.program(48,q,t),data:t});if(i||i===0)r+=i;r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n									",i=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:h.noop,fn:h.program(42,B,t),data:t});if(i||i===0)r+=i;r+="\n								</div>\n\n							</div>\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(50,R,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(52,U,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(54,z,t),data:t});if(s||s===0)r+=s;return r+="\n						</div>\n\n					",r}function F(e,t){var r="",i;r+="\n									",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(46,I,t),data:t});if(i||i===0)r+=i;return r+="\n								",r}function I(e,t){var r="",i;return r+='\n									<div class="grab-link-permission-field grab-link-field">\n										<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									',r}function q(e,t){return" hide-reminder"}function R(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-embed">\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="embed-code-text-field" value="',(s=n.defaultEmbedrCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultEmbedrCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n\n								</div>\n							',r}function U(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-iframe-embed">\n									<div class="iframe-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultIframeSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultIframeSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="iframe-code-text-field" value="',(s=n.defaultIframeCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultIframeCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n								</div>\n							',r}function z(e,t){var r="",i,s;return r+='\n								<div class="link-type-content html-bb-embed">\n									<input readonly type="text" class="bb-code-text-field" value="',(i=n.defaultBBCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultBBCode,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n									<div class="bb-code-size-field embed-size-field">\n										<span class="embed-code-label">\n											',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,s):c.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,s)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n								</div>\n							',r}function W(e,t){var r="",i;return r+='\n				<div class="mail-perm-field">\n					<span class="mail-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n					<span class="dropdown-arrow"></span>\n				</div>\n				',r}function X(e,t){var r="",i;r+="\n					",i=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(59,V,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function V(e,t){var r="",i,s;return r+='\n						<div class="tertiary non-public-warning">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nonPublicWarning,s):c.call(e,"renderTrustedMarkup",e.nonPublicWarning,s)))+"</div>\n					",r}function $(e,t){return"make-room-for-dropdown"}function J(e,t){var r;return r=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(64,K,t),data:t}),r||r===0?r:""}function K(e,t){return"make-room-for-warning"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n			<div class="network-buttons">\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.FACEBOOK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==
null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TUMBLR"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(9,g,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TWITTER"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(11,y,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.PINTEREST"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(13,b,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.MAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n			</div>\n\n			<div class="link-instructions ',u=n["if"].call(t,t.moveInstructionsUp,{hash:{},inverse:h.noop,fn:h.program(15,w,i),data:i});if(u||u===0)s+=u;s+='">\n				',(u=n.copyMessage)?u=u.call(t,{hash:{},data:i}):(u=t.copyMessage,u=typeof u===f?u.apply(t):u),s+=l(u)+'\n			</div>\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(17,E,i),data:i});if(u||u===0)s+=u;s+='">',a={hash:{intlName:"share-modal.GRAB_LINK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(19,S,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(30,A,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.program(44,j,i),fn:h.program(32,O,i),data:i});if(u||u===0)s+=u;s+='\n\n				</div>\n			</div>\n		</div>\n\n\n		<div class="email-sharing-panel share-panel">\n\n			<div class="message-form">\n				<div class="fake-input">\n					<input type="text" class="email-recipient-text-field" placeholder="',a={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'" data-field="recipient">\n				</div>\n\n				',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(58,X,i),fn:h.program(56,W,i),data:i});if(u||u===0)s+=u;s+='\n\n				<textarea class="email-message-text-field ',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(63,J,i),fn:h.program(61,$,i),data:i});if(u||u===0)s+=u;return s+='" placeholder="',a={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'"></textarea>\n			</div>\n\n			<button disabled class="share-by-email mini">',a={hash:{intlName:"share-modal.FLICKR_SHARE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</button>\n			<button class="leave-email-sharing mini alt">',a={hash:{intlName:"common.BACK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call
(t,a):c.call(t,"intlHTMLMessage",a)))+"</button>\n\n		</div>\n\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel-restyle",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" single-link"}function d(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(4,v,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(6,m,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(8,g,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function v(e,t){var r="",i,s;return r+='\n								<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED_SIMPLE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function m(e,t){var r="",i,s;return r+='\n							<span class="link-type-button email-type-button">',s={hash:{intlName:"share-modal.EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function g(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function y(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(6,m,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function b(e,t){return" single-highlight"}function w(e,t){var r="",i,s;r+='\n						<div class="link-type-content grab-link-only grab-link">\n							<div class="network-buttons">\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(19,x,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(21,T,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(23,N,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(25,C,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n'+'\n							</div>\n\n\n							<input readonly type="text" class="grab-link-text-field" value="',(s=n.grabLink)?s=s.call(e,{hash:{},data:t}):(s=e.grabLink,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n\n							',s=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(27,k,t),data:t});if(s||s===0)r+=s;r+='\n\n							<div class="grab-link-loader ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(30,A,t),data:t});if(s||s===0)r+=s;r+=" ",s=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(32,O,t),data:t});if(s||s===0)r+=s;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.program(36,_,t),fn:c.program(34,M,t),data:t});if(s||s===0)r+=s;r+='">',(s=n.privacyWarningString)?s=s.call(e,{hash:{},data:t}):(s=e.privacyWarningString,s=typeof s===h?s.apply(e):s),r+=l(s)+"</div>\n								",s=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:c.noop,fn:c.program(38,D,t),data:t});if(s||s===0)r+=s;r+="\n							</div>\n\n						</div>\n\n						"
,s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(40,P,t),data:t});if(s||s===0)r+=s;return r+="\n					",r}function E(e,t){return" sharing-type-disabled"}function S(e,t){return" sharing-type-enabled"}function x(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.facebook),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function T(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.tumblr),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function N(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.twitter),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function C(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.pinterest),r==null||r===!1?r:r.canNotShareTitle),typeof r===h?r.apply(e):r))+'"',n}function k(e,t){var r="",i;r+="\n								",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(28,L,t),data:t});if(i||i===0)r+=i;return r+="\n							",r}function L(e,t){var r="",i;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===h?i.apply(e):i),r+=l(i)+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								',r}function A(e,t){return" no-permission-loader"}function O(e,t){return"no-permission-loader"}function M(e,t){return" hide-reminder"}function _(e,t){return" with-guestpasses "}function D(e,t){var r="",i,s;return r+='<div class="grab-link-download-reminder">',(i=n.downloadAccessString)?i=i.call(e,{hash:{},data:t}):(i=e.downloadAccessString,i=typeof i===h?i.apply(e):i),r+=l(i)+" ",s={hash:{intlName:"share-modal.CHANGE_DOWNLOAD_PREF",url:"/account/prefs/downloads/"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</div>",r}function P(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="',o={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field ',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(43,B,t),fn:c.program(41,H,t),data:t});if(s||s===0)r+=s;r+='" placeholder="',o={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n									',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(48,I,t),fn:c.program(46,F,t),data:t});if(s||s===0)r+=s;return r+='\n									<button disabled class="share-by-email">',o={hash:{intlName:"share-modal.FLICKR_SHARE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</button>\n								</div>\n							</div>\n						",r}function H(e,t){return"make-room-for-dropdown"}function B(e,t){var r;return r=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:c.noop,fn:c.program(44,j,t),data:t}),r||r===0?r:""}function j(e,t){return"make-room-for-warning"}function F(e,t){var r="",i;return r+='\n									<div class="mail-perm-field">\n										<span class="mail-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===h?i.apply(e):i),r+=l(i)+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									',r}function I(e,t){var r="",i;r+="\n										",i=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:c.noop,fn:c.program(49,q,t),data:t});if(i||i===0)r+=i;return r+="\n									",r}function q(e,t){var r="",i,s;return r+='\n											<div class="tertiary non-public-warning">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nonPublicWarning,s):f.call(e,"renderTrustedMarkup",e.nonPublicWarning,s)))+"</div>\n										",r}function R(e,t){var r="",i,s;r+='\n\n						<div class="link-type-content grab-link">\n\n							<div class="network-buttons">\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(19,x,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.facebook),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(21,T,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.tumblr),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+
l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(23,N,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.twitter),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n								<span class="share-link '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+"\n\n								",s=n.unless.call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.program(17,S,t),fn:c.program(15,E,t),data:t});if(s||s===0)r+=s;r+='"\n\n								',s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.canNotShareTitle),{hash:{},inverse:c.noop,fn:c.program(25,C,t),data:t});if(s||s===0)r+=s;r+='>\n\n									<span class="share-link-icon '+l((i=(i=(i=e.networkClasses,i==null||i===!1?i:i.pinterest),i==null||i===!1?i:i.className),typeof i===h?i.apply(e):i))+'-icon"></span>\n								</span>\n'+'\n							</div>\n							<input readonly type="text" class="grab-link-text-field" value="',(s=n.grabLink)?s=s.call(e,{hash:{},data:t}):(s=e.grabLink,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n\n							',s=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(27,k,t),data:t});if(s||s===0)r+=s;r+='\n\n							<div class="grab-link-loader ',s=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:c.noop,fn:c.program(32,O,t),data:t});if(s||s===0)r+=s;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder ',s=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:c.program(36,_,t),fn:c.program(34,M,t),data:t});if(s||s===0)r+=s;r+='">',(s=n.privacyWarningString)?s=s.call(e,{hash:{},data:t}):(s=e.privacyWarningString,s=typeof s===h?s.apply(e):s),r+=l(s)+"</div>\n								",s=n["if"].call(e,e.showDownloadWarning,{hash:{},inverse:c.noop,fn:c.program(38,D,t),data:t});if(s||s===0)r+=s;r+="\n							</div>\n\n						</div>\n\n						",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(52,U,t),data:t});if(s||s===0)r+=s;r+="\n\n						",s=n["if"].call(e,(i=(i=e.networkClasses,i==null||i===!1?i:i.flickr),i==null||i===!1?i:i.canShare),{hash:{},inverse:c.noop,fn:c.program(61,$,t),data:t});if(s||s===0)r+=s;r+="\n\n						",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(63,J,t),data:t});if(s||s===0)r+=s;return r+="\n\n					",r}function U(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content html-embed">\n\n								<input readonly type="text" class="embed-code-text-field" value="',(i=n.defaultEmbedrCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultEmbedrCode,i=typeof i===h?i.apply(e):i),r+=l(i)+'">\n\n								<div class="embed-demo-container ',o={hash:{},inverse:c.noop,fn:c.program(53,z,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(55,W,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;r+='">\n									<div class="embed-demo">\n									</div>\n								</div>\n\n								<div class="embed-options">\n									<div class="radio">\n										<input type="checkbox" data-setting="header" id="embedr-option-header" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;r+='>\n										<label for="embedr-option-header">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_HEADER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'</span>\n										</label>\n									</div>\n\n									<div class="radio">\n										<input type="checkbox" data-setting="footer" id="embedr-option-footer" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;r+='>\n										<label for="embedr-option-footer">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_FOOTER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</span>\n										</label>\n									</div>\n\n									",s=n.unless.call(e,e.isAlbumEmbed,{hash:{},inverse:c.noop,fn:c.program(59,V,t),data:t});if(s||s===0)r+=s;return r+='\n\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):f.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n								</div> <!-- embed options-->\n\n							</div>\n						',r}function z(e,t){return"show-header"}function W(e,t){return"show-footer"}function X(e,t){return'checked="true"'}function V
(e,t){var r="",i,s,o;r+='\n									<div class="radio">\n										<input type="checkbox" data-setting="context" id="embedr-option-context" name="radio" ',o={hash:{},inverse:c.noop,fn:c.program(57,X,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.context),"===","true",o):f.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.context),"===","true",o));if(s||s===0)r+=s;return r+='>\n										<label for="embedr-option-context">\n											<div class="square"></div>\n											<span>',o={hash:{intlName:"share-modal.EMBEDR_OPTION_SLIDESHOW"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</span>\n										</label>\n									</div>\n									",r}function $(e,t){var r="",i,s,o;r+='\n							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="',o={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field ',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(43,B,t),fn:c.program(41,H,t),data:t});if(s||s===0)r+=s;r+='" placeholder="',o={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n									',s=n["if"].call(e,e.showMailPerms,{hash:{},inverse:c.program(48,I,t),fn:c.program(46,F,t),data:t});if(s||s===0)r+=s;return r+='\n\n									<button disabled class="share-by-email">',o={hash:{intlName:"share-modal.FLICKR_SHARE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,o):f.call(e,"intlHTMLMessage",o)))+"</button>\n								</div>\n							</div>\n						",r}function J(e,t){var r="",i,s;return r+='\n							<div class="link-type-content html-bb-embed">\n								<input readonly type="text" class="bb-code-text-field" value="',(i=n.defaultBBCode)?i=i.call(e,{hash:{},data:t}):(i=e.defaultBBCode,i=typeof i===h?i.apply(e):i),r+=l(i)+'">\n								<div class="bb-code-size-field embed-size-field">\n									<span class="embed-code-label">\n										',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,s):f.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,s)))+'\n									</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n							</div>\n						',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button ',o=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+='">',a={hash:{intlName:"share-modal.SHARE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n						",u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(10,y,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(12,b,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.program(51,R,i),fn:c.program(14,w,i),data:i});if(u||u===0)s+=u;return s+="\n\n				</div>\n			</div>\n\n\n		</div>\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-embedr-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;o={hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o):l.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.header),"===","true",o));if(s||s===0)r+=s;o={hash:{},inverse:f.noop,fn:f.program(4,v,t),data:t},s=(i=n.ifCond||e.ifCond,i?i.call(e,(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o):l.call(e,"ifCond",(i=e.displayOptions,i==null||i===!1?i:i.footer),"===","true",o));if(s||s===0)r+=s;s=n.unless.call(e,e.isAlbumEmbed,{hash:{},inverse:f.noop,fn:f.program(6,m,t),data:t});if(s||s===0)r+=s;return r}function d(e,t){return'data-header="true" '}function v(e,t){return'data-footer="true" '}function m(e,t){var r,i,s;return s={hash:{},inverse:f.noop,fn:f.program(7,g,t),data:t},i=(r=n.ifCond||e.ifCond,r?r.call(e,(r=e.displayOptions,r==null||r===!1?r:r.context),"===","true",s):l.call(e,"ifCond",(r=e.displayOptions,r==null||r===!1?r:r.context),"===","true",s)),i||i===0?i:""}function g(e,t){return'data-context="true" '}function y(e,t){return'data-vr="true" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;s+='<a data-flickr-embed="true" ',a={hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i},u=(o=n.isFlipped||t.isFlipped,o?o.call(t,t.flippers,"enable-share-restyle",a):l.call(t,"isFlipped",t.flippers,"enable-share-restyle",a));if(u||u===0)s+=u;a={hash:{},inverse:f.noop,fn:f.program(9,y,i),data:i},u=(o=n.ifCond||t.ifCond,o?o.call(t,(o=t.displayOptions,o==null||o===!1?o:o.vr),"===","true",a):l.call(t,"ifCond",(o=t.displayOptions,o==null||o===!1?o:o.vr),"===","true",a));if(u||u===0)s+=u;return s+=' href="',(u=n.embedLink)?u=u.call(t,{hash:{},data:i}):(u=t.embedLink,u=typeof u===c?u.apply(t):u),s+=h(u)+'" title="',(u=n.title)?u=u.call(t,{hash:{},data:i}):(u=t.title,u=typeof u===c?u.apply(t):u),s+=h(u)+'"><img src="',(u=n.farmURL)?u=u.call(t,{hash:{},data:i}):(u=t.farmURL,u=typeof u===c?u.apply(t):u),s+=h(u)+'" width="',(u=n.width)?u=u.call(t,{hash:{},data:i}):(u=t.width,u=typeof u===c?u.apply(t):u),s+=h(u)+'" height="',(u=n.height)?u=u.call(t,{hash:{},data:i}):(u=t.height,u=typeof u===c?u.apply(t):u),s+=h(u)+'" alt="',(u=n.alt)?u=u.call(t,{hash:{},data:i}):(u=t.alt,u=typeof u===c?u.apply(t):u),s+=h(u)+'"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-bb-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="by [url=",i=n["if"].call(e,e.authorURL,{hash:{},inverse:l.program(4,d,t),fn:l.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="]",(i=n.authorName)?i=i.call(e,{hash:{},data:t}):(i=e.authorName,i=typeof i===a?i.apply(e):i),r+=f(i)+"[/url]",r}function p(e,t){var r;return(r=n.authorURL)?r=r.call(e,{hash:{},data:t}):(r=e.authorURL,r=typeof r===a?r.apply(e):r),f(r)}function d(e,t){return"shortURL"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+="[url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"][img]",(o=n.farmURL)?o=o.call(t,{hash:{},data:i}):(o=t.farmURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/img][/url][url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"]",(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/url] ",o=n["if"].call(t,t.authorName,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+=", ",u={hash:{intlName:"share-modal.ON_FLICKR"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):c.call(t,"intlMessage",u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-bb-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
